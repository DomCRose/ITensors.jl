<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ITensor Examples · ITensors.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="ITensors.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">ITensors.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Introduction</a></li><li><span class="tocitem">Code Examples</span><ul><li class="is-active"><a class="tocitem" href="ITensor.html">ITensor Examples</a><ul class="internal"><li><a class="tocitem" href="#Print-Indices-of-an-ITensor-1"><span>Print Indices of an ITensor</span></a></li><li><a class="tocitem" href="#Getting-and-Setting-Elements-of-an-ITensor-1"><span>Getting and Setting Elements of an ITensor</span></a></li><li><a class="tocitem" href="#Arithmetic-With-ITensors-1"><span>Arithmetic With ITensors</span></a></li><li><a class="tocitem" href="#Elementwise-Operations-on-ITensors-1"><span>Elementwise Operations on ITensors</span></a></li><li><a class="tocitem" href="#Tracing-an-ITensor-1"><span>Tracing an ITensor</span></a></li><li><a class="tocitem" href="#Write-and-Read-an-ITensor-to-Disk-with-HDF5-1"><span>Write and Read an ITensor to Disk with HDF5</span></a></li></ul></li><li><a class="tocitem" href="MPSandMPO.html">MPS and MPO Examples</a></li><li><a class="tocitem" href="DMRG.html">DMRG Examples</a></li><li><a class="tocitem" href="Physics.html">Physics System Examples</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="../IndexType.html">Index</a></li><li><a class="tocitem" href="../IndexValType.html">IndexVal</a></li><li><a class="tocitem" href="../IndexSetType.html">IndexSet</a></li><li><a class="tocitem" href="../ITensorType.html">ITensor</a></li><li><a class="tocitem" href="../MPSandMPO.html">MPS and MPO</a></li><li><a class="tocitem" href="../QN.html">QN</a></li><li><a class="tocitem" href="../SiteType.html">SiteType and op</a></li><li><input class="collapse-toggle" id="menuitem-3-8" type="checkbox"/><label class="tocitem" for="menuitem-3-8"><span class="docs-label">DMRG</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../DMRG.html">DMRG</a></li><li><a class="tocitem" href="../Sweeps.html">Sweeps</a></li><li><a class="tocitem" href="../ProjMPO.html">ProjMPO</a></li><li><a class="tocitem" href="../ProjMPOSum.html">ProjMPOSum</a></li><li><a class="tocitem" href="../Observer.html">Observer System for DMRG</a></li><li><a class="tocitem" href="../DMRGObserver.html">DMRGObserver</a></li></ul></li><li><a class="tocitem" href="../AutoMPO.html">AutoMPO</a></li></ul></li><li><span class="tocitem">Advanced usage guide</span><ul><li><a class="tocitem" href="../AdvancedUsageGuide.html">Advanced usage guide</a></li><li><a class="tocitem" href="../Multithreading.html">Multithreading</a></li><li><a class="tocitem" href="../QNTricks.html">Symmetric tensor background and usage</a></li><li><a class="tocitem" href="../CodeTiming.html">Timing and profiling</a></li><li><a class="tocitem" href="../ContractionSequenceOptimization.html">Contraction sequence optimization</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Code Examples</a></li><li class="is-active"><a href="ITensor.html">ITensor Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="ITensor.html">ITensor Examples</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ITensor/ITensors.jl/blob/master/docs/src/examples/ITensor.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ITensor-Code-Examples-1"><a class="docs-heading-anchor" href="#ITensor-Code-Examples-1">ITensor Code Examples</a><a class="docs-heading-anchor-permalink" href="#ITensor-Code-Examples-1" title="Permalink"></a></h1><h2 id="Print-Indices-of-an-ITensor-1"><a class="docs-heading-anchor" href="#Print-Indices-of-an-ITensor-1">Print Indices of an ITensor</a><a class="docs-heading-anchor-permalink" href="#Print-Indices-of-an-ITensor-1" title="Permalink"></a></h2><p>Sometimes the printout of an ITensor can be rather large, whereas you might only want to see its indices. For these cases, just wrap the ITensor in the function <code>inds</code> like this:</p><pre><code class="language-julia">@show inds(T)</code></pre><p>or this</p><pre><code class="language-julia">println(&quot;T inds = &quot;,inds(T))</code></pre><h2 id="Getting-and-Setting-Elements-of-an-ITensor-1"><a class="docs-heading-anchor" href="#Getting-and-Setting-Elements-of-an-ITensor-1">Getting and Setting Elements of an ITensor</a><a class="docs-heading-anchor-permalink" href="#Getting-and-Setting-Elements-of-an-ITensor-1" title="Permalink"></a></h2><p>Say we have an ITensor constructed as:</p><pre><code class="language-julia">i = Index(3,&quot;index_i&quot;)
j = Index(2,&quot;index_j&quot;)
k = Index(4,&quot;index_k&quot;)

T = ITensor(i,j,k)</code></pre><p>An ITensor constructed this way starts with all of its elements equal to zero. (Technically it allocates no storage at all but this is an implementation detail.)</p><p><strong>Setting Elements</strong></p><p>To set an element of this ITensor, such as the element where <code>(i,j,k) = (2,1,3)</code>, you can do the following:</p><pre><code class="language-julia">T[i=&gt;2,j=&gt;1,k=&gt;3] = -3.2</code></pre><p>In the Julia language, the notation <code>a=&gt;b</code> is a built-in notation for making a <code>Pair(a,b)</code> object.</p><p>Because the Index objects are passed to <code>T</code> along with their values, passing them in a different order has exactly the same effect:</p><pre><code class="language-julia"># Both of these lines of code do the same thing:
T[j=&gt;1,i=&gt;2,k=&gt;3] = -3.2
T[j=&gt;1,k=&gt;3,i=&gt;2] = -3.2</code></pre><p><strong>Getting Elements</strong></p><p>You can retrieve individual elements of an ITensor by accessing them through the same notation used to set elements:</p><pre><code class="language-julia">el = T[j=&gt;1,i=&gt;2,k=&gt;3]
println(&quot;The (i,j,k) = (2,1,3) element of T is &quot;,el)</code></pre><h2 id="Arithmetic-With-ITensors-1"><a class="docs-heading-anchor" href="#Arithmetic-With-ITensors-1">Arithmetic With ITensors</a><a class="docs-heading-anchor-permalink" href="#Arithmetic-With-ITensors-1" title="Permalink"></a></h2><p>ITensors can be added and subtracted and multiplied by scalars just like plain tensors can. But ITensors have the additional feature that you can add and subtract them even if their indices are in a different order from each other, as long as they have the same collection of indices.</p><p>For example, say we have ITensors <code>A</code>, <code>B</code>, and <code>C</code>:</p><pre><code class="language-julia">i = Index(3,&quot;i&quot;)
j = Index(2,&quot;j&quot;)
k = Index(4,&quot;k&quot;)

A = randomITensor(i,j,k)
B = randomITensor(i,j,k)
C = randomITensor(k,i,j)</code></pre><p>Above we have initialized these ITensors to have random elements, just for the sake of this example.</p><p>We can then add or subtract these ITensors</p><pre><code class="language-julia">R1 = A+B
R2 = A-B
R3 = A+B-C</code></pre><p>or do more complicated operations involving real and complex scalars too:</p><pre><code class="language-julia">R4 = 2.0*A - B + C/(1+1im)</code></pre><h2 id="Elementwise-Operations-on-ITensors-1"><a class="docs-heading-anchor" href="#Elementwise-Operations-on-ITensors-1">Elementwise Operations on ITensors</a><a class="docs-heading-anchor-permalink" href="#Elementwise-Operations-on-ITensors-1" title="Permalink"></a></h2><p>ITensor objects support Julia broadcasting operations, making it quite easy to carry out element-wise operations on them in a very similar way as for regular Julia arrays. As a concrete example, consider the following ITensor initialized with random elements</p><pre><code class="language-julia">i = Index(2,&quot;i&quot;)
j = Index(3,&quot;j&quot;)

T = randomITensor(i,j)</code></pre><p>Here are some examples of basic element-wise operations we can do using Julia&#39;s dotted operator broadcasting syntax.</p><pre><code class="language-julia"># Multiply every element of `T` by 2.0:
T .*= 2.0</code></pre><pre><code class="language-julia"># Add 1.5 to every element of T
T .+= 1.5</code></pre><p>The dotted notation works for functions too:</p><pre><code class="language-julia"># Replace every element in T by its absolute value:
T .= abs.(T)</code></pre><pre><code class="language-julia"># Replace every element in T by the number 1.0
T .= one.(T)</code></pre><p>If have another ITensor <code>A = ITensor(j,i)</code>, which has the same set of indices though possibly in a different order, then we can also do element-wise operations involving both ITensors:</p><pre><code class="language-julia"># Add elements of A and T element-wise
A .= A .+ T</code></pre><p>Last but not least, it is possible to make custom functions yourself and broadcast them across elements of ITensors:</p><pre><code class="language-julia">myf(x) = 1.0/(1.0+exp(-x))
T .= myf.(T)</code></pre><h2 id="Tracing-an-ITensor-1"><a class="docs-heading-anchor" href="#Tracing-an-ITensor-1">Tracing an ITensor</a><a class="docs-heading-anchor-permalink" href="#Tracing-an-ITensor-1" title="Permalink"></a></h2><p>An important operation involving a single tensor is tracing out certain pairs of indices. Say we have an ITensor <code>A</code> with indices <code>i,j,l</code>:</p><pre><code class="language-julia">i = Index(4,&quot;i&quot;)
j = Index(3,&quot;j&quot;)
l = Index(4,&quot;l&quot;)

A = randomITensor(i,j,l)</code></pre><p>and we want to trace <code>A</code> by summing over the indices <code>i</code> and <code>l</code> locked together, in other words: <span>$\sum_{i} A^{iji}$</span>.</p><p>To do this in ITensor, we can use a <code>delta</code> tensor, which you can think of as an identity operator or more generally a Kronecker delta or &quot;hyper-edge&quot;:</p><p><img src="itensor_trace_figures/delta_itensor.png" alt/></p><p>Viewed as an array, a delta tensor has all diagonal elements equal to 1.0 and zero otherwise.</p><p>Now we can compute the trace by contracting <code>A</code> with the delta tensor:</p><pre><code class="language-julia">trA = A * delta(i,l)</code></pre><p><img src="itensor_trace_figures/trace_A.png" alt/></p><h2 id="Write-and-Read-an-ITensor-to-Disk-with-HDF5-1"><a class="docs-heading-anchor" href="#Write-and-Read-an-ITensor-to-Disk-with-HDF5-1">Write and Read an ITensor to Disk with HDF5</a><a class="docs-heading-anchor-permalink" href="#Write-and-Read-an-ITensor-to-Disk-with-HDF5-1" title="Permalink"></a></h2><p>Saving ITensors to disk can be very useful. For example, you might encounter a bug in your own code, and by reading the ITensors involved from disk you can shortcut the process of running a lengthy algorithm over many times to reproduce the bug. Or you can save the output of an expensive calculation, such as a DMRG calculation, and use it as a starting point for multiple follow-up calculations such as computing time-dependent properties.</p><p>ITensors can be written to files using the HDF5 format. HDF5 offers many benefits such as being portable across different machine types, and offers a standard interface across various libraries and languages.</p><p><strong>Writing an ITensor to an HDF5 File</strong></p><p>Let&#39;s say you have an ITensor <code>T</code> which you have made or obtained from a calculation. To write it to an HDF5 file named &quot;myfile.h5&quot; you can use the following pattern:</p><pre><code class="language-julia">using HDF5
f = h5open(&quot;myfile.h5&quot;,&quot;w&quot;)
write(f,&quot;T&quot;,T)
close(f)</code></pre><p>Above, the string &quot;T&quot; can actually be any string you want such as &quot;ITensor T&quot; or &quot;Result Tensor&quot; and doesn&#39;t have to have the same name as the reference <code>T</code>. Closing the file <code>f</code> is optional and you can also write other objects to the same file before closing it.</p><p><strong>Reading an ITensor from an HDF5 File</strong></p><p>Say you have an HDF5 file &quot;myfile.h5&quot; which contains an ITensor stored as a dataset with the name &quot;T&quot;. (Which would be the situation if you wrote it as in the example above.) To read this ITensor back from the HDF5 file, use the following pattern:</p><pre><code class="language-julia">using HDF5
f = h5open(&quot;myfile.h5&quot;,&quot;r&quot;)
T = read(f,&quot;T&quot;,ITensor)
close(f)</code></pre><p>Note the <code>ITensor</code> argument to the read function, which tells Julia which read function to call and how to interpret the data stored in the HDF5 dataset named &quot;T&quot;. In the future we might lift the requirement of providing the type and have it be detected automatically from the data stored in the file.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../index.html">« Introduction</a><a class="docs-footer-nextpage" href="MPSandMPO.html">MPS and MPO Examples »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 28 April 2021 15:27">Wednesday 28 April 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
